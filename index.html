<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<title>BoxTipping</title>
<style>
body { margin:0; background:#111; color:white; font-family:Arial; text-align:center; }
canvas { background:#222; display:block; margin:20px auto; border:2px solid #555;}
#ui { font-size:18px; margin:10px; }
button {
  padding:10px 20px; font-size:18px; border:none; border-radius:6px;
  cursor:pointer; margin:5px;
}
#restartBtn { background:#f00; color:white; display:none; }
#menuBtn { background:#444; color:white; }
</style>
</head>
<body>

<h1>BoxTipping</h1>

<div id="ui">
Score: <span id="score">0</span> | 
Lives: <span id="lives">3</span> | 
Level: <span id="level">1</span>
</div>

<canvas id="game" width="400" height="600"></canvas>

<button id="restartBtn">Restart</button>
<button id="menuBtn">Menü</button>

<script>
// ------------------------------
// VARIABLEN
// ------------------------------
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let score = 0, lives = 3, level = 1;
let gameRunning = true;
let gameLoopID;

// Spieler
const player = { x:180, y:550, w:40, h:40, speed:6 };

// Gegner
let enemy = { x:180, y:0, w:40, h:40, speed:2 };

// Powerups und Bullets
let bullets = [];
let powerups = [];

// ------------------------------
// GAME LOOP
// ------------------------------
function gameLoop() {
    gameLoopID = requestAnimationFrame(gameLoop);
    if (!gameRunning) return;

    // Clear Canvas
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Spieler zeichnen
    ctx.fillStyle = "red";
    ctx.fillRect(player.x, player.y, player.w, player.h);

    // Gegner bewegen
    enemy.y += enemy.speed;
    ctx.fillStyle = "yellow";
    ctx.fillRect(enemy.x, enemy.y, enemy.w, enemy.h);

    // Collision
    if(enemy.y + enemy.h >= player.y &&
       enemy.x < player.x + player.w &&
       enemy.x + enemy.w > player.x) {
        lives--;
        document.getElementById("lives").textContent = lives;
        resetEnemy();

        if(lives <= 0) endGame();
    }

    // Gegner unten durch
    if(enemy.y > 600) {
        score += 10;
        document.getElementById("score").textContent = score;
        resetEnemy();
    }

    // Platzhalter Powerups & Bullets (können später gefüllt werden)
    bullets.forEach(b => { ctx.fillStyle="blue"; ctx.fillRect(b.x,b.y,b.w,b.h); });
    powerups.forEach(p => { ctx.fillStyle="green"; ctx.fillRect(p.x,p.y,p.w,p.h); });
}

// ------------------------------
// FUNKTIONEN
// ------------------------------
function resetEnemy(){
    enemy.y = -40;
    enemy.x = Math.random() * (canvas.width - enemy.w);
}

function endGame(){
    gameRunning = false;
    document.getElementById("restartBtn").style.display = "inline-block";
}

function startGame(){
    // Variablen zurücksetzen
    score = 0;
    lives = 3;
    level = 1;
    gameRunning = true;
    enemy.x = Math.random()*(canvas.width-enemy.w);
    enemy.y = -40;

    document.getElementById("score").textContent = score;
    document.getElementById("lives").textContent = lives;
    document.getElementById("level").textContent = level;

    bullets = [];
    powerups = [];

    document.getElementById("restartBtn").style.display = "none";

    gameLoop();
}

// ------------------------------
// EVENTLISTENER
// ------------------------------
document.addEventListener("keydown", (e)=>{
    if(e.key==="ArrowLeft") player.x -= player.speed;
    if(e.key==="ArrowRight") player.x += player.speed;

    if(player.x<0) player.x=0;
    if(player.x+player.w>canvas.width) player.x=canvas.width-player.w;
});

// Restart Button
document.getElementById("restartBtn").addEventListener("click", startGame);

// Menü Button
document.getElementById("menuBtn").addEventListener("click", ()=>{
    window.location.href = "seite3.html";
});

// ------------------------------
// GAME START
// ------------------------------
startGame();
</script>

</body>
</html>

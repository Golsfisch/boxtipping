<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BoxTipping - Clean Start</title>
<style>
body {margin:0;font-family:sans-serif;overflow:hidden;user-select:none;background:#111;color:#fff;}
header {text-align:center;padding:15px;font-size:24px;font-weight:bold;}
#info {position:absolute;top:20px;left:10px;background:rgba(0,0,0,0.3);padding:5px 10px;border-radius:5px;}
canvas {display:block;margin:0 auto;background:#222;border:2px solid #fff;border-radius:10px;}
#restartBtn {position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);display:none;padding:10px 20px;background:lime;color:#000;border:none;border-radius:5px;cursor:pointer;}
</style>
</head>
<body>

<header>BoxTipping ðŸ˜Š</header>
<div id="info">Score: 0 | Lives: 3 | Level: 1</div>
<canvas id="gameCanvas" width="360" height="640"></canvas>
<button id="restartBtn">Restart</button>

<script>
const canvas = document.getElementById('gameCanvas');
const ctx = canvas.getContext('2d');
const info = document.getElementById('info');
const restartBtn = document.getElementById('restartBtn');

let playerSize = 50;
let playerX = canvas.width/2 - playerSize/2;
let playerY = canvas.height - 100;

let score = 0;
let lives = 3;
let level = 1;
let gameOver = false;

// Gegner
class Enemy {
  constructor(){
    this.size = 40;
    this.x = Math.random()*(canvas.width - this.size);
    this.y = -this.size;
    this.speed = 2 + level*0.5;
  }
  draw(){ctx.fillStyle='yellow'; ctx.fillRect(this.x,this.y,this.size,this.size);}
  update(){
    this.y += this.speed;
    // Kollision
    if(this.y + this.size >= playerY &&
       this.y <= playerY + playerSize &&
       this.x + this.size >= playerX &&
       this.x <= playerX + playerSize){
      lives--;
      this.reset();
      if(lives <= 0){gameOver=true; restartBtn.style.display='block';}
    }
    // Reset wenn unten
    if(this.y > canvas.height) this.reset();
  }
  reset(){
    this.y = -this.size;
    this.x = Math.random()*(canvas.width - this.size);
  }
}

let enemies = [];
function spawnEnemies(){enemies=[]; for(let i=0;i<5;i++) enemies.push(new Enemy());}
spawnEnemies();

// Steuerung
document.addEventListener('mousemove',(e)=>{
  const rect = canvas.getBoundingClientRect();
  playerX = Math.min(Math.max(e.clientX - rect.left - playerSize/2,0), canvas.width-playerSize);
});

// Restart
restartBtn.addEventListener('click',()=>{
  score = 0; lives = 3; level = 1; gameOver = false; spawnEnemies(); restartBtn.style.display='none';
});

// Game Loop
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  // Player
  ctx.fillStyle='red';
  ctx.fillRect(playerX,playerY,playerSize,playerSize);
  // Enemies
  enemies.forEach(e=>{e.update(); e.draw();});
  // Score
  score += 0.01;
  // Level up bis 4
  if(score >= level*20 && level<4){
    level++;
    spawnEnemies();
  }
  info.textContent = `Score: ${Math.floor(score)} | Lives: ${lives} | Level: ${level}`;
  if(!gameOver) requestAnimationFrame(gameLoop);
}

gameLoop();
</script>

</body>
</html>

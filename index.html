<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>BoxTipping - Version 1</title>
<style>
body {
  margin: 0;
  overflow: hidden;
  font-family: Arial;
  background: linear-gradient(180deg,#111,#222,#111);
  color: white;
  user-select: none;
}
header {
  text-align: center;
  padding: 10px;
  font-size: 24px;
  font-weight: bold;
}
#infoBox {
  position: absolute;
  top: 10px;
  left: 10px;
  background: rgba(0,0,0,0.4);
  padding: 8px 15px;
  border-radius: 8px;
  font-size: 16px;
}
canvas {
  display: block;
  margin: 0 auto;
  background: rgba(0,0,0,0.2);
  border: 2px solid white;
  border-radius: 10px;
  backdrop-filter: blur(4px);
}
button {
  display: block;
  margin: 20px auto;
  padding: 12px 20px;
  background: lime;
  color: black;
  border: none;
  border-radius: 10px;
  font-size: 18px;
  cursor: pointer;
}
#restartBtn {background: orange;}
#toVersion2Btn {background: #4CAF50;}
</style>
</head>
<body>

<header>BoxTipping ðŸ˜Š</header>
<div id="infoBox">Score: 0 | Lives: 3 | Level: 1</div>
<canvas id="gameCanvas" width="400" height="700"></canvas>

<button id="restartBtn">Restart</button>
<button id="toVersion2Btn">Zur Version 2</button>

<script>
// === CANVAS SETUP ==================================
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
const restartBtn = document.getElementById("restartBtn");
const toVersion2Btn = document.getElementById("toVersion2Btn");
const info = document.getElementById("infoBox");

// === GAME STATE =====================================
let score = 0;
let lives = 3;
let level = 1;
let gameOver = false;

// === PLAYER =========================================
let player = { x: canvas.width/2 - 25, y: canvas.height - 120, size: 50, speed: 6 };

// === ENEMY CLASS ====================================
class Enemy {
  constructor() { this.reset(); }
  reset() { this.size=40; this.x=Math.random()*(canvas.width-this.size); this.y=-Math.random()*400-40; this.speed=2+level*0.5; }
  draw(){ctx.fillStyle="yellow"; ctx.fillRect(this.x,this.y,this.size,this.size);}
  update(){
    this.y+=this.speed;
    if(this.y>canvas.height) this.reset();
    if(collide(player,this)){ lives--; this.reset(); if(lives<=0) endGame(); }
  }
}
let enemies = [];
function spawnEnemies(){ enemies=[]; for(let i=0;i<6;i++) enemies.push(new Enemy()); }
spawnEnemies();

// === COLLISION ======================================
function collide(a,b){ return !(a.x+a.size<b.x || a.x>b.x+b.size || a.y+a.size<b.y || a.y>b.y+b.size); }

// === PLAYER MOVE ====================================
document.addEventListener("mousemove", e=>{
  const rect=canvas.getBoundingClientRect();
  player.x=Math.min(Math.max(e.clientX-rect.left-player.size/2,0), canvas.width-player.size);
});
document.addEventListener("touchmove", e=>{
  const rect=canvas.getBoundingClientRect();
  player.x=e.touches[0].clientX-rect.left-player.size/2;
  if(player.x<0)player.x=0;
  if(player.x>canvas.width-player.size)player.x=canvas.width-player.size;
  e.preventDefault();
});

// === GAME END =======================================
function endGame(){ gameOver=true; restartBtn.style.display="block"; }

// === RESTART ========================================
restartBtn.onclick = ()=>{
  score=0; lives=3; level=1; gameOver=false; spawnEnemies();
  restartBtn.style.display="none";
  info.textContent=`Score: ${Math.floor(score)} | Lives: ${lives} | Level: ${level}`;
};

// === REDIRECT TO VERSION 2 =========================
toVersion2Btn.onclick = ()=>{ window.location.href="version2.html"; };

// === GAME LOOP ======================================
function gameLoop(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // Spieler
  ctx.fillStyle="red";
  ctx.fillRect(player.x,player.y,player.size,player.size);

  // Gegner
  enemies.forEach(e=>{e.update(); e.draw();});

  // Score
  score += 0.05;
  if(score > level*50 && level<4 && !gameOver){ level++; spawnEnemies(); }

  info.textContent=`Score: ${Math.floor(score)} | Lives: ${lives} | Level: ${level}`;

  if(!gameOver) requestAnimationFrame(gameLoop);
}
gameLoop();
</script>

</body>
</html>
